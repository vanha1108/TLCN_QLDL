{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\TT\\\\Desktop\\\\TLCN\\\\TLCN_QLDL\\\\FRONTEND\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\TT\\\\Desktop\\\\TLCN\\\\TLCN_QLDL\\\\FRONTEND\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\TT\\\\Desktop\\\\TLCN\\\\TLCN_QLDL\\\\FRONTEND\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\TT\\\\Desktop\\\\TLCN\\\\TLCN_QLDL\\\\FRONTEND\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\TT\\\\Desktop\\\\TLCN\\\\TLCN_QLDL\\\\FRONTEND\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\TT\\\\Desktop\\\\TLCN\\\\TLCN_QLDL\\\\FRONTEND\\\\src\\\\views\\\\Login.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { CardTitle, CardText, Row, CardHeader, CardBody, Col, Card, FormFeedback } from 'reactstrap';\nimport Form from \"views/form.js\";\nimport history from \"history.js\";\n\nvar Login = /*#__PURE__*/function (_Component) {\n  _inherits(Login, _Component);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      username: '',\n      password: '',\n      token: '',\n      redirect: localStorage.getItem('authorization') ? true : false\n    };\n    _this.onSubmitHandler = _this.onSubmitHandler.bind(_assertThisInitialized(_this));\n    _this.emailInputChangeHandler = _this.emailInputChangeHandler.bind(_assertThisInitialized(_this));\n    _this.passwordInputChangeHandler = _this.passwordInputChangeHandler.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"onSubmitHandler\",\n    value: function onSubmitHandler() {\n      var _this2 = this;\n\n      if (!(this.state.email === '' || this.state.password === '')) {\n        axios.post('/api/user/login', {\n          username: this.state.username,\n          password: this.state.password\n        }).then(function (res) {\n          if (res.data.success === true) {\n            console.log('success');\n\n            _this2.setState({\n              token: res.headers.authorization\n            });\n\n            console.log(_this2.state.token);\n            var data = _this2.state.token;\n            localStorage.setItem('authorization', JSON.stringify(data));\n\n            _this2.setState({\n              redirect: true\n            });\n\n            var hours = 1; // Reset when storage is more than 24hours\n\n            var now = new Date().getTime();\n            var setupTime = localStorage.getItem('setupTime');\n\n            if (setupTime == null) {\n              localStorage.setItem('setupTime', now);\n            } else {\n              if (now - setupTime > hours * 60) {\n                localStorage.clear();\n                localStorage.setItem('setupTime', now);\n              }\n            }\n\n            if (res.data.user.role === 1) {\n              history.push(\"/admin/icons\");\n            } else {\n              history.push(\"/user/notifications\");\n            }\n          } else {\n            alert('sai pass rồi hoac tài khoản rồi !!!');\n          }\n        }).catch(function (err) {\n          console.log('lỗi');\n        });\n      } else {\n        alert('Hãy nhâp đầy đủ tài khoản và mật khẩu!!');\n      }\n    }\n  }, {\n    key: \"emailInputChangeHandler\",\n    value: function emailInputChangeHandler(event) {\n      this.setState({\n        username: event.target.value\n      });\n    }\n  }, {\n    key: \"passwordInputChangeHandler\",\n    value: function passwordInputChangeHandler(event) {\n      this.setState({\n        password: event.target.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container mt-5 mr-0\",\n        id: \"content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        className: \"card-user\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        className: \"ml-auto mr-auto text-center\",\n        md: \"6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(CardTitle, {\n        tag: \"h3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 33\n        }\n      }, \"Hello User\"), /*#__PURE__*/React.createElement(\"img\", {\n        alt: \"...\",\n        className: \"avatar\",\n        src: require(\"assets/img/emilyz.jpg\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 35\n        }\n      }))), /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.onSubmitHandler.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"email\",\n        className: \"text-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 29\n        }\n      }, \"Email:\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 88\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"\",\n        className: \"form-control\",\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"example@domain.com\",\n        onChange: this.emailInputChangeHandler,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"password\",\n        className: \"text-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 29\n        }\n      }, \"Password:\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 94\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"\",\n        className: \"form-control\",\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"********\",\n        onChange: this.passwordInputChangeHandler,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between align-items-end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.onSubmitHandler,\n        className: \"btn btn-info btn-md\",\n        type: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 29\n        }\n      }, \"Login\"))))), /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        md: \"4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        className: \"card-user\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(CardText, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"author\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"block block-one\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"block block-two\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"block block-three\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"block block-four\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"a\", {\n        href: \"#pablo\",\n        onClick: function onClick(e) {\n          return e.preventDefault();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        alt: \"...\",\n        className: \"avatar\",\n        src: require(\"assets/img/james.jpg\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 31\n        }\n      }), /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 31\n        }\n      }, \"Nguyen Van Thang\")), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 29\n        }\n      }, \"Admin\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-description ml-auto mr-auto text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 27\n        }\n      }, \"Need support please contact admin\", /*#__PURE__*/React.createElement(\"p\", {\n        className: \"card-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 29\n        }\n      }, \"Phone Number:\", ' ', \"0971484530\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"card-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 29\n        }\n      }, \"Email:\", ' ', \"admin@gmail.com\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"container mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 29\n        }\n      }, \"---------------\")))))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/TT/Desktop/TLCN/TLCN_QLDL/FRONTEND/src/views/Login.js"],"names":["React","Component","axios","CardTitle","CardText","Row","CardHeader","CardBody","Col","Card","FormFeedback","Form","history","Login","props","state","username","password","token","redirect","localStorage","getItem","onSubmitHandler","bind","emailInputChangeHandler","passwordInputChangeHandler","email","post","then","res","data","success","console","log","setState","headers","authorization","setItem","JSON","stringify","hours","now","Date","getTime","setupTime","clear","user","role","push","alert","catch","err","event","target","value","require","e","preventDefault"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAmBC,QAAnB,EAA4BC,GAA5B,EAAgCC,UAAhC,EAA2CC,QAA3C,EAAoDC,GAApD,EAAwDC,IAAxD,EAA6DC,YAA7D,QAAiF,YAAjF;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,OAAP,MAAoB,YAApB;;IAEMC,K;;;;;AAEJ,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;AAEA,UAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAC,EADE;AAEXC,MAAAA,QAAQ,EAAC,EAFE;AAGXC,MAAAA,KAAK,EAAE,EAHI;AAIXC,MAAAA,QAAQ,EAAEC,YAAY,CAACC,OAAb,CAAqB,eAArB,IAAwC,IAAxC,GAA+C;AAJ9C,KAAb;AAOA,UAAKC,eAAL,GAAuB,MAAKA,eAAL,CAAqBC,IAArB,+BAAvB;AACA,UAAKC,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BD,IAA7B,+BAA/B;AACA,UAAKE,0BAAL,GAAkC,MAAKA,0BAAL,CAAgCF,IAAhC,+BAAlC;AAZiB;AAalB;;;;sCAEiB;AAAA;;AAChB,UAAI,EAAE,KAAKR,KAAL,CAAWW,KAAX,KAAqB,EAArB,IAA2B,KAAKX,KAAL,CAAWE,QAAX,KAAwB,EAArD,CAAJ,EACI;AACFf,QAAAA,KAAK,CAACyB,IAAN,CAAW,iBAAX,EAA8B;AAC5BX,UAAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWC,QADO;AAE5BC,UAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWE;AAFO,SAA9B,EAGGW,IAHH,CAGQ,UAACC,GAAD,EAAS;AAEf,cAAGA,GAAG,CAACC,IAAJ,CAASC,OAAT,KAAmB,IAAtB,EACA;AACEC,YAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;;AACE,YAAA,MAAI,CAACC,QAAL,CAAc;AACZhB,cAAAA,KAAK,EAAEW,GAAG,CAACM,OAAJ,CAAYC;AADP,aAAd;;AAGAJ,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAI,CAAClB,KAAL,CAAWG,KAAvB;AACA,gBAAMY,IAAI,GAAG,MAAI,CAACf,KAAL,CAAWG,KAAxB;AACAE,YAAAA,YAAY,CAACiB,OAAb,CAAqB,eAArB,EAAsCC,IAAI,CAACC,SAAL,CAAeT,IAAf,CAAtC;;AACA,YAAA,MAAI,CAACI,QAAL,CAAc;AACZf,cAAAA,QAAQ,EAAE;AADE,aAAd;;AAIA,gBAAIqB,KAAK,GAAG,CAAZ,CAZJ,CAYmB;;AACf,gBAAIC,GAAG,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAV;AACA,gBAAIC,SAAS,GAAGxB,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAhB;;AACA,gBAAIuB,SAAS,IAAI,IAAjB,EAAuB;AACnBxB,cAAAA,YAAY,CAACiB,OAAb,CAAqB,WAArB,EAAkCI,GAAlC;AACH,aAFD,MAEO;AACH,kBAAGA,GAAG,GAACG,SAAJ,GAAgBJ,KAAK,GAAC,EAAzB,EAA6B;AACzBpB,gBAAAA,YAAY,CAACyB,KAAb;AACAzB,gBAAAA,YAAY,CAACiB,OAAb,CAAqB,WAArB,EAAkCI,GAAlC;AACH;AACJ;;AAED,gBAAGZ,GAAG,CAACC,IAAJ,CAASgB,IAAT,CAAcC,IAAd,KAAqB,CAAxB,EACA;AACEnC,cAAAA,OAAO,CAACoC,IAAR,CAAa,cAAb;AACD,aAHD,MAKA;AACEpC,cAAAA,OAAO,CAACoC,IAAR,CAAa,qBAAb;AACD;AAEJ,WAlCD,MAmCI;AACFC,YAAAA,KAAK,CAAC,qCAAD,CAAL;AACD;AAGF,SA7CD,EA6CGC,KA7CH,CA6CS,UAAAC,GAAG,EAAI;AACdnB,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACD,SA/CD;AAgDD,OAlDD,MAmDK;AACHgB,QAAAA,KAAK,CAAC,yCAAD,CAAL;AACD;AACF;;;4CAEuBG,K,EAAO;AAC7B,WAAKlB,QAAL,CAAc;AACZlB,QAAAA,QAAQ,EAAEoC,KAAK,CAACC,MAAN,CAAaC;AADX,OAAd;AAGD;;;+CAE0BF,K,EAAO;AAChC,WAAKlB,QAAL,CAAc;AACZjB,QAAAA,QAAQ,EAAEmC,KAAK,CAACC,MAAN,CAAaC;AADX,OAAd;AAGD;;;6BAEQ;AACL,0BACM;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAqC,QAAA,EAAE,EAAC,SAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,GAAD;AAAK,QAAA,SAAS,EAAC,6BAAf;AAA6C,QAAA,EAAE,EAAC,GAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAGI,oBAAC,SAAD;AAAY,QAAA,GAAG,EAAC,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHJ,eAIM;AACI,QAAA,GAAG,EAAC,KADR;AAEI,QAAA,SAAS,EAAC,QAFd;AAGI,QAAA,GAAG,EAAEC,OAAO,CAAC,uBAAD,CAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJN,CADJ,CADA,eAcA,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,IAAD;AAAM,QAAA,QAAQ,EAAE,KAAKjC,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAO,QAAA,OAAO,EAAC,OAAf;AAAuB,QAAA,SAAS,EAAC,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAC2D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAD3D,eAEA;AACI,QAAA,EAAE,EAAC,EADP;AAEI,QAAA,SAAS,EAAC,cAFd;AAGI,QAAA,IAAI,EAAC,MAHT;AAII,QAAA,IAAI,EAAC,UAJT;AAKI,QAAA,WAAW,EAAC,oBALhB;AAMI,QAAA,QAAQ,EAAE,KAAKC,uBANnB;AAOI,QAAA,QAAQ,MAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFA,CADF,eAYE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAO,QAAA,OAAO,EAAC,UAAf;AAA0B,QAAA,SAAS,EAAC,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADA,eACiE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADjE,eAEA;AACI,QAAA,EAAE,EAAC,EADP;AAEI,QAAA,SAAS,EAAC,cAFd;AAGI,QAAA,IAAI,EAAC,UAHT;AAII,QAAA,IAAI,EAAC,UAJT;AAKI,QAAA,WAAW,EAAC,UALhB;AAMI,QAAA,QAAQ,EAAE,KAAKC,0BANnB;AAOI,QAAA,QAAQ,MAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFA,CAZF,eAuBE;AAAK,QAAA,SAAS,EAAC,gDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEA;AAAQ,QAAA,OAAO,EAAE,KAAKH,eAAtB;AAAuC,QAAA,SAAS,EAAC,qBAAjD;AAAuE,QAAA,IAAI,EAAC,QAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFA,CAvBF,CADF,CAdA,CADJ,eA+CI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA/CJ,CADJ,eAmDI,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,eAGE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,eAIE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,eAKE;AAAG,QAAA,IAAI,EAAC,QAAR;AAAiB,QAAA,OAAO,EAAE,iBAAAkC,CAAC;AAAA,iBAAIA,CAAC,CAACC,cAAF,EAAJ;AAAA,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,GAAG,EAAC,KADN;AAEE,QAAA,SAAS,EAAC,QAFZ;AAGE,QAAA,GAAG,EAAEF,OAAO,CAAC,sBAAD,CAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAME;AAAI,QAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BANF,CALF,eAaE;AAAG,QAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAbF,CAFF,eAiBE;AAAK,QAAA,SAAS,EAAC,8CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DAEE;AAAG,QAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA8C,GAA9C,eAFF,eAGE;AAAG,QAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAuC,GAAvC,oBAHF,eAIE;AAAI,QAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAJF,CAjBF,CADF,CADF,CAnDJ,CADJ,CADN;AAoFD;;;;EA3KetD,S;;AA8KpB,eAAeY,KAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { CardTitle,CardText,Row,CardHeader,CardBody,Col,Card,FormFeedback } from 'reactstrap';\r\nimport Form from \"views/form.js\";\r\nimport history from \"history.js\";\r\n\r\nclass Login extends Component {\r\n   \r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      username:'',\r\n      password:'',\r\n      token: '',\r\n      redirect: localStorage.getItem('authorization') ? true : false\r\n    }\r\n\r\n    this.onSubmitHandler = this.onSubmitHandler.bind(this);\r\n    this.emailInputChangeHandler = this.emailInputChangeHandler.bind(this);\r\n    this.passwordInputChangeHandler = this.passwordInputChangeHandler.bind(this);\r\n  }\r\n\r\n  onSubmitHandler() {\r\n    if (!(this.state.email === '' || this.state.password === '')\r\n      ) {\r\n      axios.post('/api/user/login', {\r\n        username: this.state.username,\r\n        password: this.state.password\r\n      }).then((res) => {\r\n        \r\n        if(res.data.success===true)\r\n        {\r\n          console.log('success');\r\n            this.setState({\r\n              token: res.headers.authorization            \r\n            });\r\n            console.log(this.state.token);\r\n            const data = this.state.token;\r\n            localStorage.setItem('authorization', JSON.stringify(data));\r\n            this.setState({\r\n              redirect: true\r\n            });\r\n\r\n            var hours = 1; // Reset when storage is more than 24hours\r\n            var now = new Date().getTime();\r\n            var setupTime = localStorage.getItem('setupTime');\r\n            if (setupTime == null) {\r\n                localStorage.setItem('setupTime', now)\r\n            } else {\r\n                if(now-setupTime > hours*60) {\r\n                    localStorage.clear()\r\n                    localStorage.setItem('setupTime', now);\r\n                }\r\n            }\r\n            \r\n            if(res.data.user.role===1)\r\n            {\r\n              history.push(\"/admin/icons\");\r\n            }\r\n            else\r\n            {\r\n              history.push(\"/user/notifications\");\r\n            }\r\n            \r\n        }\r\n        else{\r\n          alert('sai pass rồi hoac tài khoản rồi !!!');\r\n        }\r\n        \r\n            \r\n      }).catch(err => {\r\n        console.log('lỗi')\r\n      });\r\n    } \r\n    else {\r\n      alert('Hãy nhâp đầy đủ tài khoản và mật khẩu!!');\r\n    }\r\n  }\r\n\r\n  emailInputChangeHandler(event) {\r\n    this.setState({\r\n      username: event.target.value\r\n    });\r\n  }\r\n\r\n  passwordInputChangeHandler(event) {\r\n    this.setState({\r\n      password: event.target.value\r\n    });\r\n  }\r\n  \r\n  render() {\r\n      return (\r\n            <div className=\"container mt-5 mr-0\" id=\"content\">\r\n                <Row>\r\n                    <Col md=\"5\">\r\n                        <Card className=\"card-user\">\r\n                        <CardHeader>\r\n                            <Col className=\"ml-auto mr-auto text-center\" md=\"6\">\r\n                              \r\n                                \r\n                                <CardTitle  tag=\"h3\">Hello User</CardTitle>\r\n                                  <img\r\n                                      alt=\"...\"\r\n                                      className=\"avatar\"\r\n                                      src={require(\"assets/img/emilyz.jpg\")}\r\n                                  />\r\n                                \r\n                            </Col>\r\n                        </CardHeader>\r\n                        <CardBody>\r\n                          <Form onSubmit={this.onSubmitHandler.bind(this)}>                            \r\n                            <div className=\"form-group\">\r\n                            <label htmlFor=\"email\" className=\"text-info\">Email:</label><br />\r\n                            <input\r\n                                id=\"\"\r\n                                className=\"form-control\"\r\n                                type=\"text\"\r\n                                name=\"username\"\r\n                                placeholder=\"example@domain.com\"\r\n                                onChange={this.emailInputChangeHandler}\r\n                                required />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                            <label htmlFor=\"password\" className=\"text-info\">Password:</label><br />\r\n                            <input\r\n                                id=\"\"\r\n                                className=\"form-control\"\r\n                                type=\"password\"\r\n                                name=\"password\"\r\n                                placeholder=\"********\"\r\n                                onChange={this.passwordInputChangeHandler}\r\n                                required />\r\n                            </div>\r\n                            <div className=\"d-flex justify-content-between align-items-end\">\r\n                           \r\n                            <button onClick={this.onSubmitHandler} className=\"btn btn-info btn-md\" type=\"button\">Login</button>\r\n                            </div>\r\n                          </Form>\r\n                        \r\n                        </CardBody>\r\n                        </Card>\r\n                        <Card></Card>\r\n                    \r\n                    </Col>\r\n                    <Col md=\"4\">\r\n                      <Card className=\"card-user\">\r\n                        <CardBody>\r\n                          <CardText />\r\n                          <div className=\"author\">\r\n                            <div className=\"block block-one\" />\r\n                            <div className=\"block block-two\" />\r\n                            <div className=\"block block-three\" />\r\n                            <div className=\"block block-four\" />\r\n                            <a href=\"#pablo\" onClick={e => e.preventDefault()}>\r\n                              <img\r\n                                alt=\"...\"\r\n                                className=\"avatar\"\r\n                                src={require(\"assets/img/james.jpg\")}\r\n                              />\r\n                              <h5 className=\"title\">Nguyen Van Thang</h5>\r\n                            </a>\r\n                            <p className=\"description\">Admin</p>\r\n                          </div>\r\n                          <div className=\"card-description ml-auto mr-auto text-center\">\r\n                          Need support please contact admin\r\n                            <p className=\"card-description\">Phone Number:{' '}0971484530</p>\r\n                            <p className=\"card-description\">Email:{' '}admin@gmail.com</p>\r\n                            <p  className=\"container mt-3\" >---------------</p>                    \r\n                          </div>                  \r\n                        </CardBody>                \r\n                      </Card>\r\n                    </Col>\r\n                </Row>     \r\n            </div>       \r\n        );\r\n    }\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}